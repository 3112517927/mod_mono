.\" 
.\" mod_mono manual page.
.\" (C) 2004,2005 Novell, Inc. 
.\" Author:
.\"   Gonzalo Paniagua Javier (gonzalo@ximian.com)
.\"
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..

.TH mod_mono "8" "9 Feb 2005" "mod_mono @VERSION@" "ASP.NET Support for Apache"
.SH NAME
mod_mono \- apache module that enables ASP.NET pages. Works together with mod-mono-server.exe
.SH DESCRIPTION
\fImod_mono\fP is a simple module that works with both 1.3 and 2.0
versions of apache.
.PP
It needs mod-mono-server.exe installed on the system. By default, it
will attemp to run mod-mono-server.exe if it doesn't find it's running.
.SH CONFIGURATION DIRECTIVES
.PP
All the directives but MonoSetServerAlias accept an optional first argument that
is the mod-mono-server instance alias for which the directive applies.  If only
one argument is provided for them, thr directive will apply to the 'default'
mod-mono-server instance. Refer to the monodoc documentation on configuring
mod_mono for more examples.

.TP
.I "MonoUnixSocket"
It accepts a file name as argument. That file will be a named pipe
used to send/receive data from/to mod_mono to/from mod-mono-server.
You cannot use MonoListenPort and MonoUnixSocket at the same time.
Default value: "/tmp/mod_mono_server".
.TP
.I "MonoListenPort"
TCP port on which mod-mono-server should listen/is listening on. Mutually
exclusive with MonoUnixSocket. When this options is specified,
mod-mono-server and mod_mono will use a TCP socket for communication.
Default value: none
.TP
.I "MonoListenAddress"
IP address where mod-mono-server should listen/is listening on. Can only be
used when MonoListenPort is specified.
Default value: "127.0.0.1"
.TP
.I "MonoRunXSP"
If the value is True, it tells mod_mono to spawn mod-mono-server.exe
if it's not already running. If set to False, most of these directives are
useless.
Default value: True
.TP
.I MonoExecutablePath
The full path to mono executable.
Default value: "/usr/bin/mono"
.TP
.I MonoPath
This value will be used to set the MONO_PATH environment variable.
Default value: ""
.TP
.I MonoServerPath
The full path to mod-mono-server.exe.
Default value: "/usr/bin/mod-mono-server.exe"
.TP
.I "MonoWapiDir"
The directory where mono runtime will create the ".wapi" directory
used to emulate windows I/O. It's used to set MONO_SHARED_DIR.
Default value: "/tmp"
.TP
.I MonoDocumentRootDir
The directory passed in --root argument when launching mod-mono-server.
.TP
.I "MonoMaxCPUTime"
If MonoRunXSP is True, CPU time limit in seconds allowed for the
spawned mono process. Beyond that, it will be restarted. If this
capability is not available on your system, the directive will be
ignored.
Default value: system default
.TP
.I "MonoMaxMemory"
If MonoRunXSP is True, the maximum size of the process's data
segment (data size) in bytes allowed for the spawned mono process.
It will be restarted when the limit is reached. If this capability
is not available on your system, the directive will be ignored.
Default value: system default
.TP
.I MonoApplications
.TP
.I AddMonoApplications
This value will be passed to mod-mono-server.exe in the
--applications option. See xsp(1) manual page for details.
.TP
.I MonoApplicationsConfigFile
The argument passed in --appconfigfile argument to mod-mono-server.
Default value: NULL.
.TP
.I MonoApplicationsConfigDir
The argument passed in --appconfigdir argument to mod-mono-server.
Default value: config/mod-mono-applications
.PP
Note that you must specify at least one of MonoApplications,
MonoApplicationsConfigFile and MonoApplicationsConfigDir.
.TP
.I MonoAutoApplication
Enables or disables automatic ASP.NET applications discovery. By default
it is enabled if you have no application configured. Otherwise, it's
disabled. The possible values are 'enabled' or 'disabled'.
.TP
.I MonoDebug
Runs mono in debug mode, which produces stack traces with line numbers.
Default value: false.
.TP
.I MonoSetServerAlias
Takes a server alias name. This is to be used inside <Directory> or
<Location>.
Default value: 'default' if the directive is not used.
.TP
.I MonoSetEnv
Takes a string of 'name=value' pairs separated by semicolons. For each
pair, it calls setenv (name, value) before running mod-mono-server.
.SH SAMPLE CONFIGURATION
This one using <Directory>:
.nf
      LoadModule mono_module /usr/lib/apache/1.3/libmod_mono.so
      AddModule mod_mono.c
      Alias /mono "/usr/lib/xsp/test"
      AddMonoApplications default "/mono:/usr/lib/xsp/test"
      <Directory /usr/lib/xsp/test>
              SetHandler mono
              <IfModule mod_dir.c>
                    DirectoryIndex index.aspx
              </IfModule>
      </Directory>
.fi
.PP
This one using <Location>:
.nf
      LoadModule mono_module modules/libmod_mono.so
      Alias /demo "/usr/lib/xsp/test"
      AddMonoApplications default "/demo:/usr/lib/xsp/test"
      <Location /demo>
              SetHandler mono
      </Location>

.fi
.PP
If you prefer to .webapp configuration file(s)
(see manual page of xsp), you can change MonoApplications in the above
samples by:
.nf

      MonoApplicationsConfigFile default "/var/www/applications.webapp"
      
.fi
replacing the path to the file with yours.
.PP
If you want to use several .webapp files, use this instead:
.nf

      MonoApplicationsConfigDir default "/var/www/webapp"

.fi
and all the .webapp files found in the directory /var/www/webapp will be
loaded.
.PP
Refer to monodoc documentation on configuring mod_mono for more examples.
.SH THE MOD_MONO CONTROL PANEL
.PP
mod_mono provides a simple web-based control panel for restarting the 
mod-mono-server, which is useful when assemblies need to be reloaded 
from disk after they have been changed.  To activate the control panel,
place the following in your httpd.conf:

.nf
            <Location /mono>
              SetHandler mono-ctrl
              Order deny,allow
              Deny from all
              Allow from 127.0.0.1
            </Location>
.fi

The control panel is then accessible at http://yourdomain.com/mono. 
Clicking the link to restart mod-mono-server will immediately restart 
it.

The Order/Deny/Allow access controls above restrict access to the 
control panel to the computer with IP address 127.0.0.1. Replace this 
(or add more Allow lines) with the IP address of your own computer so 
that you can access the control panel.  You can also use Apache's 
htaccess features to password protect it, too.
.SH ENVIRONMENT VARIABLES
.PP
It may modify MONO_PATH, PATH and MONO_SHARED_DIR when starting
mod-mono-server.
.PP
The MOD_MONO_CCV variable may be used to select which component will
do client certificate validity (CCV) checks. By default both Apache and
Mono will verify the client certificates. This can be changed to either
"apache" or "mono" to limit the validity check to either environment.
This variable can be set using MonoSetEnv to allow different vhost to 
use separate validation techniques.
.SH FILES
.PP
httpd.conf
.SH AUTHORS
mod_mono was started by Daniel Ridruejo (daniel rawbyte com). Currently, Gonzalo
Paniagua Javier (gonzalo ximian.com) is the maintainer.
.SH MAILING LISTS
See http://mail.ximian.com/mailman/mono-list for details.
.SH WEB SITE
Visit http://www.go-mono.com for details.
.SH SEE ALSO
.BR xsp (1), mod-mono-server (1), mono (1), mcs (1)

